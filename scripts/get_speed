#!/bin/bash
INTERFACE=$(nmcli -t -f DEVICE,STATE device | grep ':connected' | cut -d: -f1 | head -n 1)

# If no network, return zeros instead of nothing
if [ -z "$INTERFACE" ]; then
    echo '{"up":"0.0","down":"0.0"}'
    exit 0
fi

# ... (rest of your speed calculation code) ...

# Final fallback check
[[ -z "$UP" ]] && UP="0.0"
[[ -z "$DOWN" ]] && DOWN="0.0"

echo "{\"up\":\"$UP\",\"down\":\"$DOWN\"}"
