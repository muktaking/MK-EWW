#!/bin/bash

# Get the active interface and its type
INTERFACE=$(nmcli -t -f DEVICE,STATE,TYPE device | grep ':connected:' | head -n 1)

if [ -z "$INTERFACE" ]; then
    echo "󰤮 Disconnected"
    exit 0
fi

DEVICE=$(echo "$INTERFACE" | cut -d: -f1)
TYPE=$(echo "$INTERFACE" | cut -d: -f3)

if [ "$TYPE" = "802-11-wireless" ] || [ "$TYPE" = "wifi" ]; then
    # Get SSID for Wifi
    SSID=$(nmcli -t -f ACTIVE,SSID dev wifi | grep '^yes' | cut -d: -f2)
    # Get Signal Strength
    SIGNAL=$(nmcli -t -f SIGNAL dev wifi list | head -n 1)
    echo "  $SSID ($SIGNAL%)"
elif [ "$TYPE" = "802-3-ethernet" ] || [ "$TYPE" = "ethernet" ]; then
    echo "󰈀 Ethernet"
else
    echo "󰈀 Connected"
fi
